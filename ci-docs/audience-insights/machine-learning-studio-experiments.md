---
title: Machine Learning Studio (klasik) denemeleri
description: Dynamics 365 Customer Insights'ta Machine Learning Studio (klasik) modellerini kullanın.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: conceptual
author: m-hartmann
ms.author: mhart
ms.reviewer: ameetj
manager: shellyha
ms.openlocfilehash: 556b6810db0ed2733a3f086291757bd85b77e371
ms.sourcegitcommit: a9b2cf598f256d07a48bba8617347ee90024a1dd
ms.translationtype: HT
ms.contentlocale: tr-TR
ms.lasthandoff: 12/03/2020
ms.locfileid: "4669042"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="188a4-103">Azure Machine Learning Studio'ya (klasik) dayalı modeller kullanma</span><span class="sxs-lookup"><span data-stu-id="188a4-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="188a4-104">Dynamics 365 Customer Insights'taki birleşik veriler, işle ilgili ek içgörüler oluşturabilen makine öğrenimi modelleri geliştirmek için bir kaynaktır.</span><span class="sxs-lookup"><span data-stu-id="188a4-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="188a4-105">Customer Insights, kendi özel modellerinizi kullanmanız için Machine Learning Studio (klasik) ile tümleştirilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="188a4-106">Azure Machine Learning'de geliştirilen modellerin Customer Insights ile nasıl tümleştirildiğini görmek için bkz. [Azure Machine Learning denemeleri](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="188a4-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="188a4-107">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="188a4-107">Prerequisites</span></span>

- <span data-ttu-id="188a4-108">Customer Insights'a erişim</span><span class="sxs-lookup"><span data-stu-id="188a4-108">Access to Customer Insights</span></span>
- <span data-ttu-id="188a4-109">Etkin Azure Kurumsal aboneliği</span><span class="sxs-lookup"><span data-stu-id="188a4-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="188a4-110">Birleşik müşteri profilleri</span><span class="sxs-lookup"><span data-stu-id="188a4-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="188a4-111">[Azure Blob depolama alanına varlık dışarı aktarma](export-azure-blob-storage.md) ayarları</span><span class="sxs-lookup"><span data-stu-id="188a4-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="188a4-112">Machine Learning Studio Klasik'i ayarlama</span><span class="sxs-lookup"><span data-stu-id="188a4-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="188a4-113">İlk adımda, bir çalışma alanı oluşturmamız ve Machine Learning Studio'yu (klasik) açmamız gerekir.</span><span class="sxs-lookup"><span data-stu-id="188a4-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="188a4-114">[https://www.portal.azure.com](https://www.portal.azure.com/) gidin ve oturum açın.</span><span class="sxs-lookup"><span data-stu-id="188a4-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="188a4-115">**Kaynak oluştur**'u seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="188a4-116">**Machine Learning Studio Çalışma Alanı**'nı arayın ve **Oluştur**'u seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="188a4-117">[Çalışma alanını oluşturmak](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace) için gerekli ayrıntıları girin.</span><span class="sxs-lookup"><span data-stu-id="188a4-117">Enter the required details to [create the workspace](https://docs.microsoft.com/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="188a4-118">İçeri aktarmayı planladığınız veri miktarına göre **Web hizmeti planı fiyatlandırma katmanı**'nı seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="188a4-119">En iyi performans için coğrafi olarak size en yakın **Konum**'u seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="188a4-120">Kaynağı oluşturduktan sonra Machine Learning Studio çalışma alanı panosu gösterilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="188a4-121">**Machine Learning Studio'yu Başlat**'ı seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Azure Machine Learning Studio kullanıcı arabirimi](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="188a4-123">Azure Machine Learning Studio ile çalışma</span><span class="sxs-lookup"><span data-stu-id="188a4-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="188a4-124">Şimdi yeni bir deneme oluşturabilir veya örnek galerisinden mevcut bir deneme şablonunu içe aktarabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="188a4-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="188a4-125">Üç standart senaryo için örnek denemeler vardır:</span><span class="sxs-lookup"><span data-stu-id="188a4-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="188a4-126">Kayıp tahmini</span><span class="sxs-lookup"><span data-stu-id="188a4-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="188a4-127">Müşteri yaşam süresi değeri</span><span class="sxs-lookup"><span data-stu-id="188a4-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="188a4-128">Ürün önerisi veya sonraki en iyi eylem</span><span class="sxs-lookup"><span data-stu-id="188a4-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="188a4-129">Yeni bir deneme oluşturduğunuzda veya galeriden bir deneme şablonu kullandığınızda **Veri Alma** özelliklerini yapılandırmanız gerekir.</span><span class="sxs-lookup"><span data-stu-id="188a4-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="188a4-130">Verilerinizi içeren Azure Blob Depolama'ya erişmek için kılavuzlu deneyimi kullanın veya doğrudan ayrıntıları sağlayın.</span><span class="sxs-lookup"><span data-stu-id="188a4-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Azure Machine Learning Studio denemesi](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="188a4-132">Artık verileri temizlemek ve önceden işlemek, özellikleri ayıklamak ve uygun bir modeli eğitmek için özel bir işleme ardışık düzeni oluşturabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="188a4-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="188a4-133">Model performansını test edin ve en iyi duruma getirin.</span><span class="sxs-lookup"><span data-stu-id="188a4-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="188a4-134">Modelin kalitesinden memnun olduğunuzda **Web hizmeti ayarla** > **Tahmine Dayalı Web Hizmeti**'ni seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="188a4-135">Bu seçenek, eğitim denemesindeki eğitilen modeli ve özellik geliştirme ardışık düzenini tahmine dayalı hizmete aktarır.</span><span class="sxs-lookup"><span data-stu-id="188a4-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="188a4-136">Tahmine dayalı hizmet, tahminde bulunmak için eğitim denemesinde kullanılan şemayla başka bir giriş verileri kümesi alabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Tahmine dayalı web hizmeti ayarlama](media/predictive-webservice-control.png)

1. <span data-ttu-id="188a4-138">Tahmine dayalı web hizmeti denemesi başarılı olduktan sonra bu denemeyi otomatik zamanlama için dağıtabilirsiniz.</span><span class="sxs-lookup"><span data-stu-id="188a4-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="188a4-139">Web hizmetinin Customer Insights ile çalışması için **Web Hizmetini Dağıt** > **Web Hizmeti [Yeni] Önizlemesini Dağıt**'ı seçin.</span><span class="sxs-lookup"><span data-stu-id="188a4-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="188a4-140">[Web hizmetini dağıtma hakkında daha fazla bilgi edinin](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="188a4-140">[Learn more about deploying a web service](https://docs.microsoft.com/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Tahmine dayalı web hizmeti dağıtma](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="188a4-142">Galeriden örnek modeller</span><span class="sxs-lookup"><span data-stu-id="188a4-142">Sample models from the gallery</span></span>

<span data-ttu-id="188a4-143">Bu makaledeki modeller için Contoso Oteli ile ilgili kurgusal bir senaryodan yararlanacağız.</span><span class="sxs-lookup"><span data-stu-id="188a4-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="188a4-144">Contoso Oteli aşağıdaki verileri toplar:</span><span class="sxs-lookup"><span data-stu-id="188a4-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="188a4-145">Otelde konaklama etkinliğinden oluşan CRM verileri.</span><span class="sxs-lookup"><span data-stu-id="188a4-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="188a4-146">Veri kümesi, her kayıtlı müşterinin konaklama tarihleri hakkında bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="188a4-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="188a4-147">Ayrıca rezervasyon, oda türleri ve harcama ayrıntıları gibi bilgiler de bulunur.</span><span class="sxs-lookup"><span data-stu-id="188a4-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="188a4-148">Veriler, 2014 Ocak ile 2018 Ocak arasındaki dört yılı kapsar.</span><span class="sxs-lookup"><span data-stu-id="188a4-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="188a4-149">Otel konuklarına ait müşteri profilleri.</span><span class="sxs-lookup"><span data-stu-id="188a4-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="188a4-150">Bu profiller adları, doğum tarihleri, posta adresleri, cinsiyetleri ve telefon numaraları dahil olmak üzere her müşteri hakkında bilgiler içerir.</span><span class="sxs-lookup"><span data-stu-id="188a4-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="188a4-151">Otel tarafından sunulan spa, çamaşırhane, kablosuz bağlantı veya kargo gibi hizmetlerin kullanımı.</span><span class="sxs-lookup"><span data-stu-id="188a4-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="188a4-152">Bu bilgiler, her kayıtlı müşteri için günlüğe kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="188a4-153">Genellikle, hizmet kullanımı konaklamayla ilişkilendirilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="188a4-154">Bazı durumlarda hizmetler, otelde kalmayan müşteriler tarafından kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="188a4-155">Kayıp Analizi</span><span class="sxs-lookup"><span data-stu-id="188a4-155">Churn Analysis</span></span>

<span data-ttu-id="188a4-156">Kayıp analizleri farklı iş alanlarında kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="188a4-157">Bu örnekte, yukarıda belirtildiği üzere özellikle otel hizmetleri bağlamında hizmet erimesini inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="188a4-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="188a4-158">Diğer tüm erime modeli türleri için başlangıç noktası olarak kullanılabilecek uçtan uca modeli ardışık düzenine uygun bir örnek sunar.</span><span class="sxs-lookup"><span data-stu-id="188a4-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="188a4-159">Kayıp Tanımı</span><span class="sxs-lookup"><span data-stu-id="188a4-159">Definition of Churn</span></span>

<span data-ttu-id="188a4-160">Kayıp tanımı senaryoya göre farklılık gösterebilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="188a4-161">Bu örnekte, geçen yıl oteli ziyaret etmemiş bir konuk, erimiş olarak etiketlenmelidir.</span><span class="sxs-lookup"><span data-stu-id="188a4-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="188a4-162">Deneme şablonu galeriden içeri aktarılabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="188a4-163">Öncelikle, Azure Blob depolamadan **Otelde Konaklama Etkinliği**, **Müşteri verileri** ve **Hizmet Kullanım Verileri** ile ilgili verileri içeri aktarın.</span><span class="sxs-lookup"><span data-stu-id="188a4-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Kayıp modeli için verileri içe aktarma](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="188a4-165">Özellik geliştirme</span><span class="sxs-lookup"><span data-stu-id="188a4-165">Featurization</span></span>

<span data-ttu-id="188a4-166">Erimenin tanımına göre, öncelikle etiketi etkileyecek işlenememiş özellikleri tanımlarız.</span><span class="sxs-lookup"><span data-stu-id="188a4-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="188a4-167">Daha sonra, bu işlenmemiş özellikleri makine öğrenimi modellerinde kullanılabilecek sayısal özelliklere göre işleriz.</span><span class="sxs-lookup"><span data-stu-id="188a4-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="188a4-168">Customer Insights'ta veri tümleştirmesi gerçekleşir, böylece *Müşteri Kimliği*'ni kullanarak bu tablolara katılabiliriz.</span><span class="sxs-lookup"><span data-stu-id="188a4-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![İçe aktarılan verileri birleştirme](media/join-imported-data.png)

<span data-ttu-id="188a4-170">Erime analizi modelini oluşturmak için özellik geliştirmek biraz karmaşık olabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="188a4-171">Yeni otel etkinlikleri günlük olarak kaydedildiğinden veriler zamana bağlı olarak değişir.</span><span class="sxs-lookup"><span data-stu-id="188a4-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="188a4-172">Özellik geliştirme sırasında dinamik verilerden statik özellikler oluşturmak isteriz.</span><span class="sxs-lookup"><span data-stu-id="188a4-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="188a4-173">Bu durumda, bir yıllık kayan pencereyle otel etkinliklerinden birden fazla özellik oluştururuz.</span><span class="sxs-lookup"><span data-stu-id="188a4-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="188a4-174">Ayrıca oda türü veya rezervasyon türü gibi kategori özelliklerini one hot kodlaması kullanarak ayrı özelliklere genişletiriz.</span><span class="sxs-lookup"><span data-stu-id="188a4-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="188a4-175">Nihai özellik listesi:</span><span class="sxs-lookup"><span data-stu-id="188a4-175">Final list of features:</span></span>

| <span data-ttu-id="188a4-176">**Numara**</span><span class="sxs-lookup"><span data-stu-id="188a4-176">**Number**</span></span>  | <span data-ttu-id="188a4-177">**Özgün_Sütun**</span><span class="sxs-lookup"><span data-stu-id="188a4-177">**Original_Column**</span></span>          | <span data-ttu-id="188a4-178">**Türetilmiş Özellikler**</span><span class="sxs-lookup"><span data-stu-id="188a4-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="188a4-179">1</span><span class="sxs-lookup"><span data-stu-id="188a4-179">1</span></span>           | <span data-ttu-id="188a4-180">Oda Türü</span><span class="sxs-lookup"><span data-stu-id="188a4-180">Room Type</span></span>                    | <span data-ttu-id="188a4-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="188a4-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="188a4-182">2</span><span class="sxs-lookup"><span data-stu-id="188a4-182">2</span></span>           | <span data-ttu-id="188a4-183">Ayırma Türü</span><span class="sxs-lookup"><span data-stu-id="188a4-183">Booking Type</span></span>                 | <span data-ttu-id="188a4-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="188a4-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="188a4-185">3</span><span class="sxs-lookup"><span data-stu-id="188a4-185">3</span></span>           | <span data-ttu-id="188a4-186">Seyahat Kategorisi</span><span class="sxs-lookup"><span data-stu-id="188a4-186">Travel Category</span></span>              | <span data-ttu-id="188a4-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="188a4-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="188a4-188">4</span><span class="sxs-lookup"><span data-stu-id="188a4-188">4</span></span>           | <span data-ttu-id="188a4-189">Harcanan Tutar</span><span class="sxs-lookup"><span data-stu-id="188a4-189">Dollars Spent</span></span>                | <span data-ttu-id="188a4-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="188a4-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="188a4-191">5</span><span class="sxs-lookup"><span data-stu-id="188a4-191">5</span></span>           | <span data-ttu-id="188a4-192">Giriş ve Çıkış tarihleri</span><span class="sxs-lookup"><span data-stu-id="188a4-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="188a4-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="188a4-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="188a4-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="188a4-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="188a4-195">6</span><span class="sxs-lookup"><span data-stu-id="188a4-195">6</span></span>           | <span data-ttu-id="188a4-196">Hizmet Kullanımı</span><span class="sxs-lookup"><span data-stu-id="188a4-196">Service Usage</span></span>                | <span data-ttu-id="188a4-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="188a4-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="188a4-198">Model seçimi</span><span class="sxs-lookup"><span data-stu-id="188a4-198">Model selection</span></span>

<span data-ttu-id="188a4-199">Şimdi kullanılacak en iyi algoritmayı seçmemiz gerekir.</span><span class="sxs-lookup"><span data-stu-id="188a4-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="188a4-200">Bu durumda, çoğu özellik kategori özelliklerine dayanır.</span><span class="sxs-lookup"><span data-stu-id="188a4-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="188a4-201">Genellikle, karar ağacı tabanlı modeller işe yarar.</span><span class="sxs-lookup"><span data-stu-id="188a4-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="188a4-202">Yalnızca sayısal özellikler varsa sinir ağları daha iyi bir tercih olabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="188a4-203">Bu tür durumlarda Destek vektörü makinesi (SVM) de iyi bir adaydır ancak en iyi performansı elde etmek için çok sayıda ayarlama gerektirir.</span><span class="sxs-lookup"><span data-stu-id="188a4-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="188a4-204">İlk seçim modeli olarak **İki Sınıflı Artırmalı Karar Ağacı**, ikinci model olarak **İki Sınıflı SVM**'yi tercih ederiz.</span><span class="sxs-lookup"><span data-stu-id="188a4-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="188a4-205">Azure Machine Learning Studio, A/B testi yapmanıza izin verdiğinden, tek model yerine iki modelle başlamak faydalıdır.</span><span class="sxs-lookup"><span data-stu-id="188a4-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="188a4-206">Aşağıdaki resimde, Azure Machine Learning Studio'da model eğitimi ve değerlendirme ardışık düzeni gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="188a4-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Azure Machine Learning Studio'da kayıp modeli](media/azure-machine-learning-model.png)

<span data-ttu-id="188a4-208">Ayrıca, model iyileştirmenin önemli bir yönü olan **Permütasyon Özellik Önemi** adlı bir teknik de uygulanır.</span><span class="sxs-lookup"><span data-stu-id="188a4-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="188a4-209">Yerleşik modeller, herhangi belirli bir özelliğin nihai tahmine etkisiyle ilgili hiç içgörü sunamaz veya çok az içgörü sunabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="188a4-210">Özellik önemi hesaplayıcısı, özelliklerin belirli bir modelin sonucuna etkisini ayrı ayrı hesaplamak için özel bir algoritma kullanır.</span><span class="sxs-lookup"><span data-stu-id="188a4-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="188a4-211">Özellik önemi, + 1 ile -1 arasında bir değere normalleştirilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="188a4-212">Olumsuz etki, ilgili özelliğin sonuç üzerinde mantığa aykırı bir etkisinin olduğu ve modelden kaldırılması gerektiği anlamına gelir.</span><span class="sxs-lookup"><span data-stu-id="188a4-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="188a4-213">Olumlu etki ise özelliğin tahmine yoğun çok fazla etkisinin olduğunu gösterir.</span><span class="sxs-lookup"><span data-stu-id="188a4-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="188a4-214">Bu değerler, farklı ölçümler olduğundan korelasyon katsayıları değildir.</span><span class="sxs-lookup"><span data-stu-id="188a4-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="188a4-215">Daha fazla bilgi için bkz. [Permütasyon Özellik Önemi](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="188a4-215">For more information, see [Permutation Feature Importance](https://docs.microsoft.com/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="188a4-216">[Erime denemesinin tamamına Azure Yapay Zeka Galerisi'nden ulaşılabilir](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="188a4-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="188a4-217">Müşteri yaşam süresi değeri tahmini</span><span class="sxs-lookup"><span data-stu-id="188a4-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="188a4-218">Müşteri yaşam süresi değeri (CLTV) hesaplaması, işletmenin müşterilerini değerlendirmek ve segmentlere ayırmak için kullanabileceği temel ölçümlerden biridir.</span><span class="sxs-lookup"><span data-stu-id="188a4-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="188a4-219">Otel işletmeleri için müşterileri tanımak çok önemlidir.</span><span class="sxs-lookup"><span data-stu-id="188a4-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="188a4-220">Örneğin, iyi müşteriler kazanmayı sağlayan faktörlerin neler olduğunu anlamak çok önemlidir.</span><span class="sxs-lookup"><span data-stu-id="188a4-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="188a4-221">Odaklanılması gereken özellikleri belirleme ve yüksek tutarda ödeme yapan müşterilerin memnuniyetini artırma konusunda otel yönetimine yardımcı olur.</span><span class="sxs-lookup"><span data-stu-id="188a4-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="188a4-222">Bu kararların satış ve kazanç üzerinde doğrudan etkisi olabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="188a4-223">CLTV'nin tanımı</span><span class="sxs-lookup"><span data-stu-id="188a4-223">Definition of CLTV</span></span>

<span data-ttu-id="188a4-224">Bu örnekte, müşterinin CLTV'sini müşterinin sonraki 365 gün içinde harcaması beklenen toplam tutar olarak tanımladık.</span><span class="sxs-lookup"><span data-stu-id="188a4-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="188a4-225">Bu değeri tahmin etmek için tüm müşterilerle ilgili geçen üç yılın verilerini kullanacağız.</span><span class="sxs-lookup"><span data-stu-id="188a4-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="188a4-226">Özellik geliştirme</span><span class="sxs-lookup"><span data-stu-id="188a4-226">Featurization</span></span>

<span data-ttu-id="188a4-227">Bu durumda, özellik geliştirme kayıp senaryosuna oldukça benzerdir.</span><span class="sxs-lookup"><span data-stu-id="188a4-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="188a4-228">Bununla birlikte, etiketler ve tahmini değerler yukarıda tanımlananlardan farklıdır.</span><span class="sxs-lookup"><span data-stu-id="188a4-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="188a4-229">Model seçimi</span><span class="sxs-lookup"><span data-stu-id="188a4-229">Model selection</span></span>

<span data-ttu-id="188a4-230">Tahmini değer, pozitif değerli sürekli değişken olduğundan CLTV'yi tahmin etmek regresyon problemidir.</span><span class="sxs-lookup"><span data-stu-id="188a4-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="188a4-231">Özelliğin özelliklerine dayalı olarak, modeli eğitmek için **Artırmalı Karar Ağacı Regresyonu** ve **Sinir Ağı Regresyonu** algoritmalarını seçeriz.</span><span class="sxs-lookup"><span data-stu-id="188a4-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="188a4-232">Ürün önerisi veya Sonraki En İyi Eylem</span><span class="sxs-lookup"><span data-stu-id="188a4-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="188a4-233">Otel senaryosunda ürün önerisi, otel tarafından müşterilere sunulan önerilen hizmetler olarak yorumlanmıştır.</span><span class="sxs-lookup"><span data-stu-id="188a4-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="188a4-234">Amaç, müşterilerin kullanımını en üst düzeye çıkarmak için onlara uygun hizmetleri seçmektir.</span><span class="sxs-lookup"><span data-stu-id="188a4-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="188a4-235">Video yayın hizmeti kullanıcılarına yönelik film önerilerine benzer.</span><span class="sxs-lookup"><span data-stu-id="188a4-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="188a4-236">Ürün Önerisi veya Sonraki En İyi Eylemin Tanımı</span><span class="sxs-lookup"><span data-stu-id="188a4-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="188a4-237">Hedefi, otel müşterilerine ilgi alanlarına en uygun hizmetleri sunarak hizmet kullanım tutarını en üst düzeye çıkarmak olarak tanımladık.</span><span class="sxs-lookup"><span data-stu-id="188a4-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="188a4-238">Özellik geliştirme</span><span class="sxs-lookup"><span data-stu-id="188a4-238">Featurization</span></span>

<span data-ttu-id="188a4-239">Erime modelinde olduğu gibi, her CustomerID için tutarlı öneriler oluşturmak amacıyla otel ServiceCustomerID ile CustomerID'yi birleştiriyoruz.</span><span class="sxs-lookup"><span data-stu-id="188a4-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Öneri modelinin özellik geliştirmesi](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="188a4-241">Veriler, üç farklı varlıktan alınır ve özellikler bunlardan türetilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="188a4-242">Öneri problemi için özellik geliştirme, kayıp veya CLTV senaryolarından farklıdır.</span><span class="sxs-lookup"><span data-stu-id="188a4-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="188a4-243">Öneri modeli, üç özellik kümesi biçiminde giriş verileri gerektirir.</span><span class="sxs-lookup"><span data-stu-id="188a4-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="188a4-244">Model seçimi</span><span class="sxs-lookup"><span data-stu-id="188a4-244">Model selection</span></span>

<span data-ttu-id="188a4-245">Ürünler ve hizmetler, öneri modelini eğitmek için **Matchbox Recommender’ı Eğit** adlı algoritmayı kullanarak tahmin edilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Ürün önerisi algoritması](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="188a4-247">**Matchbox Recommender'ı Eğit** modelinin üç giriş noktasından eğitim hizmeti kullanım verileri, müşteri açıklaması (isteğe bağlı) ve hizmet açıklaması alınır.</span><span class="sxs-lookup"><span data-stu-id="188a4-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="188a4-248">Modeli puanlamanın üç farklı yöntemi bulunur.</span><span class="sxs-lookup"><span data-stu-id="188a4-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="188a4-249">Bunlardan biri, derecelendirilen öğeleri sıralamak için Normalleştirilmiş İndirimli Kümülatif Kazanç (NDCG) puanının hesaplandığı model değerlendirmesidir.</span><span class="sxs-lookup"><span data-stu-id="188a4-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="188a4-250">Bu denemede NDCG puanı 0,97'dir.</span><span class="sxs-lookup"><span data-stu-id="188a4-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="188a4-251">Diğer iki seçenek ise modeli önerilebilir hizmet kataloğunun tamamında puanlamak veya yalnızca kullanıcıların daha önce kullanmamış olduğu öğelerde puanlamaktır.</span><span class="sxs-lookup"><span data-stu-id="188a4-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="188a4-252">Önerilerin hizmet kataloğunun tamamındaki dağılımları daha yakından incelendiğinde telefon, WiFi ve kurye hizmetlerinin en çok önerilen hizmetler olduğu görülebilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="188a4-253">Bu, hizmet tüketim verilerinin dağılımında görülen durumla tutarlıdır:</span><span class="sxs-lookup"><span data-stu-id="188a4-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Öneri modeli çıktısı](media/azure-machine-learning-model-output.png)

<span data-ttu-id="188a4-255">[Ürün önerisi denemesinin tamamına Azure Yapay Zeka Galerisi'nden ulaşılabilir.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="188a4-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="188a4-256">Özel modelleri tümleştirme</span><span class="sxs-lookup"><span data-stu-id="188a4-256">Integrate custom models</span></span>

<span data-ttu-id="188a4-257">Bu tahminleri Customer Insights'ta kullanmak için müşteri kimlikleri ile birlikte **dışarı aktarmanız** gerekir.</span><span class="sxs-lookup"><span data-stu-id="188a4-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="188a4-258">Kaynak verileri dışarı aktardığınız [aynı Azure Blob depolama konumuna tahminleri dışarı aktarın](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs).</span><span class="sxs-lookup"><span data-stu-id="188a4-258">[Export them to the same Azure Blob storage location](https://docs.microsoft.com/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="188a4-259">Tahmine dayalı web hizmeti, düzenli olarak çalıştırılacak ve puanları güncelleştirecek şekilde zamanlanabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="188a4-260">Özel model tarafından oluşturulan veriler, müşteri verilerinizi daha fazla zenginleştirmek için kullanılabilir.</span><span class="sxs-lookup"><span data-stu-id="188a4-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="188a4-261">Daha fazla bilgi için bkz. [Özel makine öğrenimi modelleri](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="188a4-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>
